#!/usr/bin/env ruby
require 'morpheus/cli'

remote_handler = Morpheus::Cli::Remote.new()

case ARGV[0]
	when 'remote'
		remote_handler.handle(ARGV[1..-1])
	when 'login'
		appliance_name, appliance_url = Morpheus::Cli::Remote.active_appliance
		Morpheus::Cli::Credentials.new(appliance_name,appliance_url).login()
	when 'groups'
		Morpheus::Cli::Groups.new().handle(ARGV[1..-1])
	when 'zones'
		Morpheus::Cli::Zones.new().handle(ARGV[1..-1])
	when 'servers'
		Morpheus::Cli::Servers.new().handle(ARGV[1..-1])
	when 'instances'
		Morpheus::Cli::Instances.new().handle(ARGV[1..-1])
	when 'instance-types'
		Morpheus::Cli::InstanceTypes.new().handle(ARGV[1..-1])
	when 'apps'
		Morpheus::Cli::Apps.new().handle(ARGV[1..-1])
	when 'deploy'
		Morpheus::Cli::Deploys.new().handle(ARGV[1..-1])
	when 'logout'
		appliance_name, appliance_url = Morpheus::Cli::Remote.active_appliance
		creds = Morpheus::Cli::Credentials.new(appliance_name,appliance_url).load_saved_credentials()
		if !creds
			puts "\nYou are not logged in.\n"
		else
			Morpheus::Cli::Credentials.new(appliance_name,appliance_url).logout()
		end
	else
		puts "\nUsage: morpheus [command] [options]\n"
end